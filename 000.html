import React, { useState, useMemo } from 'react';
import { BookOpen, Search, BrainCircuit, Microscope, Stethoscope, Pill, TestTube, Languages, Users, HeartPulse, Dna, Bug, Video, Image as ImageIcon, HelpCircle } from 'lucide-react';

// --- DATA STORE ---
// All app content is stored here, organized by language.
const content = {
  es: {
    appName: "Digestopedia",
    nav: {
      home: "Inicio",
      overview: "Visión General",
      anatomy: "Anatomía",
      physiology: "Fisiología",
      microbiota: "Microbiota",
      conditions: "Patologías",
      diagnostics: "Diagnóstico",
      quiz: "Cuestionario",
      gallery: "Galería",
      search: "Buscar...",
    },
    home: {
      title: "Bienvenido a Digestopedia",
      subtitle: "Tu guía interactiva del aparato digestivo.",
      description: "Explora la anatomía, desentraña los procesos fisiológicos y pon a prueba tus conocimientos. Selecciona una sección para comenzar tu viaje de aprendizaje.",
      sections: [
        { id: "overview", title: "Visión General", icon: BookOpen, description: "Conceptos básicos y función principal." },
        { id: "anatomy", title: "Anatomía Detallada", icon: Microscope, description: "Explora cada órgano del sistema." },
        { id: "physiology", title: "Fisiología", icon: BrainCircuit, description: "Digestión, absorción y control." },
        { id: "microbiota", title: "Microbiota Intestinal", icon: Bug, description: "El universo dentro de nosotros." },
        { id: "conditions", title: "Patologías Comunes", icon: Stethoscope, description: "Enfermedades y condiciones relevantes." },
        { id: "diagnostics", title: "Examen y Diagnóstico", icon: TestTube, description: "Métodos para evaluar la salud digestiva." },
        { id: "quiz", title: "Cuestionario Interactivo", icon: HelpCircle, description: "Evalúa lo que has aprendido." },
        { id: "gallery", title: "Galería Multimedia", icon: ImageIcon, description: "Videos e imágenes de alta definición." },
      ]
    },
    overview: {
        title: "Visión General del Aparato Digestivo",
        content: [
            {
                heading: "Función Principal",
                text: "Convertir alimentos en partículas pequeñas para su absorción y aprovechamiento por el cuerpo. Regula el hambre y la saciedad, y elimina los desechos no digeribles.",
                icon: HeartPulse
            },
            {
                heading: "Componentes Principales",
                text: "Tubo digestivo (boca, esófago, estómago, intestinos) y órganos accesorios (glándulas salivales, hígado, páncreas).",
                icon: Dna
            },
            {
                heading: "El Proceso Digestivo",
                text: "Inicia con la salivación, seguido de ingestión, digestión (mecánica y química), absorción de nutrientes y finalmente, la eliminación de desechos.",
                icon: BrainCircuit
            }
        ]
    },
    anatomy: {
        title: "Anatomía Detallada de los Órganos Digestivos",
        selectPrompt: "Selecciona un órgano para explorar sus detalles:",
        organs: {
            boca: {
                name: "Boca y Faringe",
                summary: "Inicio de la digestión mecánica (masticación) y química (amilasa salival). Formación del bolo alimenticio y deglución.",
                details: [
                    "Masticación: Descompone físicamente los alimentos.",
                    "Amilasa Salival: Enzima que comienza la digestión de carbohidratos.",
                    "Deglución: Reflejo complejo que mueve el bolo hacia el esófago."
                ]
            },
            esofago: {
                name: "Esófago",
                summary: "Conducto muscular que transfiere los alimentos desde la faringe hasta el estómago mediante ondas peristálticas.",
                details: [
                    "Estructura: Tubo de aproximadamente 25 cm de largo.",
                    "Peristalsis: Contracciones musculares involuntarias que impulsan el alimento.",
                    "Esfínter Esofágico Inferior: Válvula que previene el reflujo del contenido gástrico."
                ]
            },
            estomago: {
                name: "Estómago",
                summary: "Órgano en forma de J que mezcla, almacena y digiere alimentos con jugo gástrico ácido y enzimas.",
                details: [
                    "Partes: Cardias, fondo, cuerpo y píloro.",
                    "Jugo Gástrico: Contiene ácido clorhídrico (HCl) y pepsina para digerir proteínas.",
                    "Capas: Mucosa (con pliegues o rugosidades), submucosa, muscular y serosa.",
                    "Células Especializadas: Parietales (producen HCl), principales (pepsinógeno) y mucosas (moco protector)."
                ]
            },
            intestino_delgado: {
                name: "Intestino Delgado",
                summary: "Principal sitio de digestión y absorción de nutrientes. Mide varios metros de largo y se divide en duodeno, yeyuno e íleon.",
                details: [
                    "Secciones: Duodeno (digestión), Yeyuno (absorción de grasas y proteínas), Íleon (absorción de vitamina B12 y sales biliares).",
                    "Vellosidades: Proyecciones microscópicas que aumentan drásticamente la superficie de absorción.",
                    "Placas de Peyer: Tejido linfoide importante para la función inmune en el íleon."
                ]
            },
            intestino_grueso: {
                name: "Intestino Grueso (Colon)",
                summary: "Absorbe agua y electrolitos de los residuos de la digestión, formando las heces para su eliminación.",
                details: [
                    "Función: Absorción de agua, compactación de heces y alojamiento de la microbiota intestinal.",
                    "Motilidad: Contracciones que mueven las heces hacia el recto.",
                    "Defecación: Proceso reflejo y voluntario para expulsar las heces."
                ]
            },
            organos_accesorios: {
                name: "Órganos Accesorios",
                summary: "Hígado, vesícula biliar y páncreas. Producen y secretan sustancias esenciales para la digestión.",
                details: [
                    "Hígado: Produce bilis para la digestión de grasas.",
                    "Vesícula Biliar: Almacena y concentra la bilis.",
                    "Páncreas: Secreta enzimas digestivas (amilasa, lipasa, proteasas) y bicarbonato para neutralizar el ácido del estómago."
                ]
            }
        }
    },
    quiz: {
        title: "Cuestionario Interactivo",
        start: "Iniciar Cuestionario",
        next: "Siguiente Pregunta",
        finish: "Ver Resultados",
        restart: "Intentar de Nuevo",
        score: "Tu puntuación: {score} de {total}",
        questions: [
            {
                question: "¿En qué parte del aparato digestivo comienza la digestión de las proteínas?",
                options: ["Boca", "Estómago", "Intestino Delgado", "Hígado"],
                answer: "Estómago",
                explanation: "La pepsina, una enzima presente en el jugo gástrico del estómago, inicia la descomposición de las proteínas en péptidos más pequeños."
            },
            {
                question: "¿Cuál es la función principal de las vellosidades en el intestino delgado?",
                options: ["Producir moco", "Combatir infecciones", "Aumentar la superficie de absorción", "Mover el alimento"],
                answer: "Aumentar la superficie de absorción",
                explanation: "Las vellosidades son proyecciones diminutas que aumentan masivamente el área disponible para que los nutrientes pasen al torrente sanguíneo."
            },
            {
                question: "El hígado produce una sustancia esencial para la digestión de las grasas. ¿Cuál es?",
                options: ["Pepsina", "Amilasa", "Ácido clorhídrico", "Bilis"],
                answer: "Bilis",
                explanation: "La bilis emulsiona las grasas, es decir, las descompone en gotitas más pequeñas para que las enzimas (lipasas) puedan actuar sobre ellas de manera más eficiente."
            },
            {
                question: "¿Qué órgano absorbe la mayor parte del agua de los alimentos no digeridos?",
                options: ["Estómago", "Intestino Delgado", "Intestino Grueso", "Páncreas"],
                answer: "Intestino Grueso",
                explanation: "La función principal del intestino grueso (colon) es absorber agua y electrolitos de los restos alimenticios para formar heces sólidas."
            }
        ]
    },
    search: {
        title: "Resultados de la Búsqueda",
        noResults: "No se encontraron resultados para '{query}'.",
        resultsFor: "Resultados para '{query}':"
    }
  },
  en: {
    appName: "Digestopedia",
    nav: {
      home: "Home",
      overview: "Overview",
      anatomy: "Anatomy",
      physiology: "Physiology",
      microbiota: "Microbiota",
      conditions: "Pathologies",
      diagnostics: "Diagnostics",
      quiz: "Quiz",
      gallery: "Gallery",
      search: "Search...",
    },
    home: {
      title: "Welcome to Digestopedia",
      subtitle: "Your interactive guide to the digestive system.",
      description: "Explore anatomy, unravel physiological processes, and test your knowledge. Select a section to begin your learning journey.",
      sections: [
        { id: "overview", title: "Overview", icon: BookOpen, description: "Basic concepts and main function." },
        { id: "anatomy", title: "Detailed Anatomy", icon: Microscope, description: "Explore each organ of the system." },
        { id: "physiology", title: "Physiology", icon: BrainCircuit, description: "Digestion, absorption, and control." },
        { id: "microbiota", title: "Gut Microbiota", icon: Bug, description: "The universe within us." },
        { id: "conditions", title: "Common Pathologies", icon: Stethoscope, description: "Relevant diseases and conditions." },
        { id: "diagnostics", title: "Examination & Diagnostics", icon: TestTube, description: "Methods to assess digestive health." },
        { id: "quiz", title: "Interactive Quiz", icon: HelpCircle, description: "Test what you've learned." },
        { id: "gallery", title: "Multimedia Gallery", icon: ImageIcon, description: "High-definition videos and images." },
      ]
    },
    overview: {
        title: "Overview of the Digestive System",
        content: [
            {
                heading: "Main Function",
                text: "To convert food into small particles for absorption and use by the body. It regulates hunger and satiety, and eliminates undigested waste.",
                icon: HeartPulse
            },
            {
                heading: "Main Components",
                text: "Digestive tract (mouth, esophagus, stomach, intestines) and accessory organs (salivary glands, liver, pancreas).",
                icon: Dna
            },
            {
                heading: "The Digestive Process",
                text: "It begins with salivation, followed by ingestion, digestion (mechanical and chemical), nutrient absorption, and finally, waste elimination.",
                icon: BrainCircuit
            }
        ]
    },
    anatomy: {
        title: "Detailed Anatomy of Digestive Organs",
        selectPrompt: "Select an organ to explore its details:",
        organs: {
            boca: { name: "Mouth & Pharynx", summary: "Start of mechanical (chewing) and chemical (salivary amylase) digestion. Bolus formation and swallowing." },
            esofago: { name: "Esophagus", summary: "Muscular tube that transfers food from the pharynx to the stomach via peristaltic waves." },
            estomago: { name: "Stomach", summary: "J-shaped organ that mixes, stores, and digests food with acidic gastric juice and enzymes." },
            intestino_delgado: { name: "Small Intestine", summary: "Main site of nutrient digestion and absorption. Several meters long, divided into duodenum, jejunum, and ileum." },
            intestino_grueso: { name: "Large Intestine (Colon)", summary: "Absorbs water and electrolytes from digestive waste, forming feces for elimination." },
            organos_accesorios: { name: "Accessory Organs", summary: "Liver, gallbladder, and pancreas. They produce and secrete substances essential for digestion." }
        }
    },
    quiz: {
        title: "Interactive Quiz",
        start: "Start Quiz",
        next: "Next Question",
        finish: "See Results",
        restart: "Try Again",
        score: "Your score: {score} out of {total}",
        questions: [
            {
                question: "In which part of the digestive system does protein digestion begin?",
                options: ["Mouth", "Stomach", "Small Intestine", "Liver"],
                answer: "Stomach"
            },
            {
                question: "What is the main function of the villi in the small intestine?",
                options: ["Produce mucus", "Fight infections", "Increase absorption surface area", "Move food"],
                answer: "Increase absorption surface area"
            },
            {
                question: "The liver produces a substance essential for fat digestion. What is it?",
                options: ["Pepsin", "Amylase", "Hydrochloric acid", "Bile"],
                answer: "Bile"
            },
            {
                question: "Which organ absorbs most of the water from undigested food?",
                options: ["Stomach", "Small Intestine", "Large Intestine", "Pancreas"],
                answer: "Large Intestine"
            }
        ]
    },
    search: {
        title: "Search Results",
        noResults: "No results found for '{query}'.",
        resultsFor: "Results for '{query}':"
    }
  }
};

// --- HELPER COMPONENTS ---

const Card = ({ children, className = '' }) => (
  <div className={`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 transition-all duration-300 ${className}`}>
    {children}
  </div>
);

const IconButton = ({ Icon, onClick, children, className = '' }) => (
    <button
        onClick={onClick}
        className={`flex items-center justify-center space-x-2 px-4 py-2 rounded-lg font-semibold transition-all duration-200 ${className}`}
    >
        <Icon className="w-5 h-5" />
        <span>{children}</span>
    </button>
);

// --- PAGE COMPONENTS ---

const HomePage = ({ setPage, content }) => (
  <div className="text-center">
    <h1 className="text-4xl md:text-5xl font-bold text-blue-600 dark:text-blue-400 mb-2">{content.title}</h1>
    <p className="text-lg text-gray-600 dark:text-gray-300 mb-8">{content.subtitle}</p>
    <p className="max-w-3xl mx-auto text-gray-700 dark:text-gray-200 mb-12">{content.description}</p>
    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      {content.sections.map(section => (
        <button key={section.id} onClick={() => setPage(section.id)} className="text-left bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 hover:shadow-xl hover:-translate-y-1 transform transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <section.icon className="w-10 h-10 mb-4 text-blue-500" />
          <h3 className="text-xl font-bold text-gray-800 dark:text-white mb-2">{section.title}</h3>
          <p className="text-gray-600 dark:text-gray-400">{section.description}</p>
        </button>
      ))}
    </div>
  </div>
);

const OverviewPage = ({ content }) => (
    <div>
        <h2 className="text-3xl font-bold text-gray-800 dark:text-white mb-8">{content.title}</h2>
        <div className="space-y-6">
            {content.content.map((item, index) => (
                <Card key={index} className="flex items-start space-x-4">
                    <div className="flex-shrink-0">
                        <div className="bg-blue-100 dark:bg-blue-900 p-3 rounded-lg">
                            <item.icon className="w-6 h-6 text-blue-600 dark:text-blue-400" />
                        </div>
                    </div>
                    <div>
                        <h3 className="text-xl font-semibold text-gray-800 dark:text-white">{item.heading}</h3>
                        <p className="text-gray-600 dark:text-gray-300 mt-1">{item.text}</p>
                    </div>
                </Card>
            ))}
        </div>
    </div>
);

const AnatomyPage = ({ content }) => {
    const [selectedOrgan, setSelectedOrgan] = useState(null);
    const organKeys = Object.keys(content.organs);

    return (
        <div>
            <h2 className="text-3xl font-bold text-gray-800 dark:text-white mb-4">{content.title}</h2>
            <p className="text-gray-600 dark:text-gray-400 mb-8">{content.selectPrompt}</p>
            <div className="flex flex-col lg:flex-row gap-8">
                <div className="lg:w-1/3">
                    <div className="space-y-2">
                        {organKeys.map(key => (
                            <button
                                key={key}
                                onClick={() => setSelectedOrgan(key)}
                                className={`w-full text-left p-4 rounded-lg transition-colors duration-200 ${selectedOrgan === key ? 'bg-blue-500 text-white shadow-lg' : 'bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700'}`}
                            >
                                <span className="font-semibold">{content.organs[key].name}</span>
                            </button>
                        ))}
                    </div>
                </div>
                <div className="lg:w-2/3">
                    {selectedOrgan ? (
                        <Card className="min-h-[200px]">
                            <h3 className="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-3">{content.organs[selectedOrgan].name}</h3>
                            <p className="text-lg text-gray-700 dark:text-gray-300 mb-4 font-medium italic">{content.organs[selectedOrgan].summary}</p>
                            {content.organs[selectedOrgan].details && (
                                <ul className="list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400">
                                    {content.organs[selectedOrgan].details.map((detail, i) => <li key={i}>{detail}</li>)}
                                </ul>
                            )}
                        </Card>
                    ) : (
                        <Card className="flex items-center justify-center min-h-[200px]">
                            <p className="text-gray-500 dark:text-gray-400 text-lg">Selecciona un órgano de la lista.</p>
                        </Card>
                    )}
                </div>
            </div>
        </div>
    );
};

const QuizPage = ({ content }) => {
    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(null);
    const [userAnswers, setUserAnswers] = useState({});
    const [showResults, setShowResults] = useState(false);
    const [selectedOption, setSelectedOption] = useState(null);
    const [isAnswered, setIsAnswered] = useState(false);

    const startQuiz = () => {
        setCurrentQuestionIndex(0);
        setUserAnswers({});
        setShowResults(false);
        setSelectedOption(null);
        setIsAnswered(false);
    };

    const handleOptionSelect = (option) => {
        if (isAnswered) return;
        setSelectedOption(option);
        setUserAnswers({ ...userAnswers, [currentQuestionIndex]: option });
        setIsAnswered(true);
    };

    const handleNext = () => {
        if (currentQuestionIndex < content.questions.length - 1) {
            setCurrentQuestionIndex(currentQuestionIndex + 1);
            setSelectedOption(null);
            setIsAnswered(false);
        } else {
            setShowResults(true);
        }
    };

    if (currentQuestionIndex === null) {
        return (
            <div className="text-center">
                <h2 className="text-3xl font-bold text-gray-800 dark:text-white mb-4">{content.title}</h2>
                <button onClick={startQuiz} className="bg-blue-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-600 transition-all duration-300 text-lg">
                    {content.start}
                </button>
            </div>
        );
    }
    
    if (showResults) {
        const score = Object.keys(userAnswers).reduce((acc, index) => {
            return userAnswers[index] === content.questions[index].answer ? acc + 1 : acc;
        }, 0);

        return (
            <Card className="text-center">
                <h2 className="text-3xl font-bold text-gray-800 dark:text-white mb-4">Resultados del Cuestionario</h2>
                <p className="text-2xl text-blue-600 dark:text-blue-400 font-bold mb-6">
                    {content.score.replace('{score}', score).replace('{total}', content.questions.length)}
                </p>
                <button onClick={startQuiz} className="bg-blue-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-600 transition-all duration-300">
                    {content.restart}
                </button>
            </Card>
        );
    }

    const question = content.questions[currentQuestionIndex];
    
    return (
        <Card>
            <p className="text-sm font-semibold text-blue-500 mb-2">Pregunta {currentQuestionIndex + 1} de {content.questions.length}</p>
            <h3 className="text-2xl font-bold text-gray-800 dark:text-white mb-6">{question.question}</h3>
            <div className="space-y-3">
                {question.options.map(option => {
                    const isCorrect = option === question.answer;
                    let buttonClass = 'bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600';
                    if (isAnswered && selectedOption === option) {
                        buttonClass = isCorrect ? 'bg-green-500 text-white' : 'bg-red-500 text-white';
                    } else if (isAnswered && isCorrect) {
                        buttonClass = 'bg-green-500 text-white';
                    }

                    return (
                        <button
                            key={option}
                            onClick={() => handleOptionSelect(option)}
                            disabled={isAnswered}
                            className={`w-full text-left p-4 rounded-lg transition-colors duration-200 border-2 border-gray-200 dark:border-gray-600 ${buttonClass}`}
                        >
                            {option}
                        </button>
                    );
                })}
            </div>
            {isAnswered && (
                <div className="mt-6">
                    <Card className="bg-gray-50 dark:bg-gray-900">
                        <p className="font-bold text-lg">{userAnswers[currentQuestionIndex] === question.answer ? "¡Correcto!" : "Incorrecto."} La respuesta correcta es: <span className="text-green-600 dark:text-green-400">{question.answer}</span></p>
                        <p className="text-gray-600 dark:text-gray-300 mt-2">{question.explanation}</p>
                    </Card>
                    <button onClick={handleNext} className="mt-6 w-full bg-blue-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-600 transition-all duration-300">
                        {currentQuestionIndex < content.questions.length - 1 ? content.next : content.finish}
                    </button>
                </div>
            )}
        </Card>
    );
};

const SearchResultsPage = ({ results, query, setPage, langContent }) => {
    return (
        <div>
            <h2 className="text-3xl font-bold text-gray-800 dark:text-white mb-8">
                {results.length > 0 ? langContent.search.resultsFor.replace('{query}', query) : langContent.search.noResults.replace('{query}', query)}
            </h2>
            <div className="space-y-4">
                {results.map(result => (
                    <button key={result.id} onClick={() => setPage(result.page)} className="w-full text-left">
                        <Card className="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200">
                            <h3 className="text-xl font-semibold text-blue-600 dark:text-blue-400">{result.title}</h3>
                            <p className="text-gray-600 dark:text-gray-400" dangerouslySetInnerHTML={{ __html: result.snippet }} />
                            <span className="text-sm text-gray-500 mt-2 block">En sección: {langContent.nav[result.page]}</span>
                        </Card>
                    </button>
                ))}
            </div>
        </div>
    );
};

// --- MAIN APP COMPONENT ---

export default function App() {
    const [page, setPage] = useState('home');
    const [language, setLanguage] = useState('es');
    const [searchQuery, setSearchQuery] = useState('');
    const [searchResults, setSearchResults] = useState([]);

    const langContent = content[language];

    const handleSearch = (query) => {
        setSearchQuery(query);
        if (!query.trim()) {
            setPage('home');
            return;
        }

        const lowerCaseQuery = query.toLowerCase();
        const results = [];

        // Search in overview
        langContent.overview.content.forEach(item => {
            if (item.heading.toLowerCase().includes(lowerCaseQuery) || item.text.toLowerCase().includes(lowerCaseQuery)) {
                results.push({ id: `overview-${item.heading}`, page: 'overview', title: item.heading, snippet: item.text.substring(0, 150) + '...' });
            }
        });

        // Search in anatomy
        Object.entries(langContent.anatomy.organs).forEach(([key, organ]) => {
            if (organ.name.toLowerCase().includes(lowerCaseQuery) || organ.summary.toLowerCase().includes(lowerCaseQuery)) {
                results.push({ id: `anatomy-${key}`, page: 'anatomy', title: organ.name, snippet: organ.summary });
            }
        });
        
        setSearchResults(results);
        setPage('search');
    };

    const renderPage = () => {
        switch (page) {
            case 'overview': return <OverviewPage content={langContent.overview} />;
            case 'anatomy': return <AnatomyPage content={langContent.anatomy} />;
            case 'quiz': return <QuizPage content={langContent.quiz} />;
            case 'search': return <SearchResultsPage results={searchResults} query={searchQuery} setPage={setPage} langContent={langContent} />;
            // Add other pages here
            case 'home':
            default:
                return <HomePage setPage={setPage} content={langContent.home} />;
        }
    };

    const navItems = ['home', 'overview', 'anatomy', 'physiology', 'microbiota', 'conditions', 'quiz'];

    return (
        <div className="bg-gray-50 dark:bg-gray-900 min-h-screen font-sans text-gray-900 dark:text-gray-100">
            <header className="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50">
                <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="flex items-center justify-between h-20">
                        <div className="flex items-center space-x-3 cursor-pointer" onClick={() => setPage('home')}>
                            <BrainCircuit className="w-10 h-10 text-blue-600 dark:text-blue-400" />
                            <span className="text-2xl font-bold text-gray-800 dark:text-white">{langContent.appName}</span>
                        </div>
                        <div className="hidden lg:flex items-center space-x-2">
                             {navItems.map(item => (
                                <button key={item} onClick={() => setPage(item)} className={`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${page === item ? 'bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300' : 'hover:bg-gray-100 dark:hover:bg-gray-700'}`}>
                                    {langContent.nav[item]}
                                </button>
                            ))}
                        </div>
                        <div className="flex items-center space-x-4">
                            <div className="relative">
                                <Search className="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2" />
                                <input
                                    type="text"
                                    placeholder={langContent.nav.search}
                                    onChange={(e) => handleSearch(e.target.value)}
                                    className="bg-gray-100 dark:bg-gray-700 rounded-full pl-10 pr-4 py-2 w-40 md:w-56 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                                />
                            </div>
                            <div className="relative">
                                <select 
                                    value={language} 
                                    onChange={(e) => setLanguage(e.target.value)}
                                    className="bg-gray-100 dark:bg-gray-700 rounded-md py-2 pl-3 pr-8 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500"
                                >
                                    <option value="es">ES</option>
                                    <option value="en">EN</option>
                                </select>
                                <Languages className="w-5 h-5 text-gray-500 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none" />
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <main className="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
                {renderPage()}
            </main>
            
            <footer className="bg-white dark:bg-gray-800 mt-12 py-6 border-t border-gray-200 dark:border-gray-700">
                <div className="container mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 dark:text-gray-400">
                    <p>&copy; 2024 {langContent.appName}. Todos los derechos reservados.</p>
                    <p className="text-sm mt-2">Una herramienta educativa para explorar las maravillas del cuerpo humano.</p>
                </div>
            </footer>
        </div>
    );
}
